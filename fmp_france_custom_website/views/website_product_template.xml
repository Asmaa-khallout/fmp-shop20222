<odoo>
    <template id="custom_product_template" inherit_id="website_sale.product" priority="16">
        <xpath expr="//div[@id='product_details']" position="replace">
            <div class="col-md-6 mt-md-4" id="product_details">
                <div class=" p-4 shadow my-4">
                    <h1 itemprop="name" t-field="product.name">Product Name</h1>
                    <p class="ml-4">REF :
                        <span t-field="product.default_code"></span>
                    </p>
                    <span itemprop="url" style="display: none" t-esc="product.website_url"/>
                    <t t-if="is_view_active('website_sale.product_comment')">
                        <a href="#o_product_page_reviews" class="o_product_page_reviews_link text-decoration-none">
                            <t t-call="portal_rating.rating_widget_stars_static">
                                <t t-set="rating_avg" t-value="product.rating_avg"/>
                                <t t-set="trans_text_plural">%s reviews</t>
                                <t t-set="trans_text_singular">%s review</t>
                                <t t-set="rating_count"
                                   t-value="(trans_text_plural if product.rating_count &gt; 1 else trans_text_singular) % product.rating_count"/>
                            </t>
                        </a>
                    </t>
                </div>
                <div class="p-4 shadow my-4" t-if="user_id.partner_id.activation_state=='active'">
                    <form t-if="product._is_add_to_cart_possible()" action="/shop/cart/update" method="POST">
                        <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                        <div class="js_product js_main_product">
                            <t t-placeholder="select">
                                <input type="hidden" class="product_id" name="product_id"
                                       t-att-value="product_variant.id"/>
                                <input type="hidden" class="product_template_id" name="product_template_id"
                                       t-att-value="product.id"/>
                                <input t-if="product.public_categ_ids.ids" type="hidden" class="product_category_id"
                                       name="product_category_id" t-att-value="product.public_categ_ids.ids[0]"/>
                                <t t-if="combination" t-call="sale.variants">
                                    <t t-set="ul_class" t-valuef="flex-column"/>
                                    <t t-set="parent_combination" t-value="None"/>
                                </t>
                                <t t-else="">
                                    <ul class="d-none js_add_cart_variants"
                                        t-att-data-attribute_exclusions="{'exclusions: []'}"/>
                                </t>
                            </t>
                            <p t-if="True" class="css_not_available_msg alert alert-warning">
                                This combination does not exist.
                            </p>

                            <div id="add_to_cart_wrap" class="d-inline pt-2">
                                <a role="button" id="add_to_cart"  t-if="(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &gt;= 1"
                                   class="btn btn-primary btn-lg js_check_product a-submit my-1 mr-1 px-5 font-weight-bold flex-grow-1"
                                   href="#"><i class="fa fa-shopping-cart mr-2"/>ADD TO CART
                                </a>
                                <div id="product_option_block" class="d-inline-block align-middle"/>
                            </div>

                        </div>
                    </form>
                    <p t-elif="not product.active" class="alert alert-warning">
                        This product is no longer available.
                    </p>
                    <p t-else="" class="alert alert-warning">
                        This product has no valid combination.
                    </p>
                    <div id="product_attributes_simple">
                        <t t-set="single_value_attributes"
                           t-value="product.valid_product_template_attribute_line_ids._prepare_single_value_for_display()"/>
                        <table t-attf-class="table table-sm text-muted {{'' if single_value_attributes else 'd-none'}}">
                            <t t-foreach="single_value_attributes" t-as="attribute">
                                <tr>
                                    <td>
                                        <span t-field="attribute.name"/>:
                                        <t t-foreach="single_value_attributes[attribute]" t-as="ptal">
                                            <span t-field="ptal.product_template_value_ids._only_active().name"/>
                                            <t t-if="not ptal_last">,</t>
                                        </t>
                                    </td>
                                </tr>
                            </t>
                        </table>
                    </div>
                    <div id="o_product_terms_and_share"></div>
                </div>

                <div class="shadow" t-if="product.website_short_description">
                    <div class="d-block my-3">
                        <div class="card mb-3 border-0">
                            <div class="card-body">
                                <p class="card-text">
                                    <t t-raw="product.website_short_description"/>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@id='wrap']" position="before">
            <style>
                .css_quantity {
                border: none !important;
                }

                .input-group-prepend .btn {
                border: 1px solid #ced4da;
                border-top-left-radius: 19px;
                border-bottom-left-radius: 19px;
                }

                .input-group-append .btn {
                border: 1px solid #ced4da;
                border-top-right-radius: 19px !important;
                border-bottom-right-radius: 19px !important;
                }

                .js_quantity.form-control.quantity {
                border: 1px solid #ced4da;
                }

                .css_quantity .quantity {
                border-width: 1px;
                }
                .css_quantity .btn:hover {
                background-color: #E4E4E4 !important;
                color: black !important;
                }

                #add_to_cart {
                color: #454545;
                background: #d1d4d8 0% 0% no-repeat padding-box;
                border-color: #d1d4d8;
                }

                .cstm-card {
                border: 1px solid #ced4da;
                border-radius: 15px;
                }

                #add_to_cart_wrap>a:hover {
                background: #274b95 !important;
                border-color: #274b95 !important;
                color: white !important;
                }
                .fa.fa-chevron-right{
                border-radius: 30px !important;
                }
                .fa.fa-chevron-left{
                border-radius: 30px !important;
                }
                #add_to_cart{
                background: #DCDDDE;
                font-size: 20px;
                line-height: 20px;
                height: 50px;
                width: 50px;
                transition: all .3s;
                }
                .oe_price{
                color:#F70000 ;
                }
                .cstm-card.card-body{
                background-color: #f7f7f7 !important;
                color: #212529;
                }
            </style>

            <div class="my-1 my-md-2">
                <div class="container">
                    <div class="row">
                        <div class="col-12">
                            <ol class="breadcrumb mb-0 bg-transparent">
                                <li class="breadcrumb-item">
                                    <a href="/">
                                        <i class="dri dri-home-l"/>
                                    </a>
                                </li>
                                <li class="breadcrumb-item">
                                    <a t-att-href="keep(category=0)">Shop</a>
                                </li>
                                <li t-if="category" class="breadcrumb-item">
                                    <a t-att-href="keep('/shop/category/%s' % slug(category), category=0)"
                                       t-field="category.name"/>
                                </li>
                                <li class="breadcrumb-item active">
                                    <span t-field="product.name"/>
                                </li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </xpath>

        <xpath expr="//section[@id='product_detail']" position="attributes">
            <attribute name="t-attf-class" remove="py-4" separator=" "/>
        </xpath>

        <xpath expr="//section[@id='product_detail']/div[hasclass('row')]" position="attributes">
            <attribute name="t-if">False</attribute>
        </xpath>

        <xpath expr="//div[@id='product_details']" position="attributes">
            <attribute name="class">col-12 col-lg-6 py-2</attribute>
        </xpath>
        <xpath expr="//div[hasclass('row')]/div[hasclass('col-md-6')]" position="attributes">
            <attribute name="class">col-12 col-lg-6 pb-2</attribute>
        </xpath>

        <xpath expr="//h1[@t-field='product.name']" position="before">
            <t t-call="theme_prime.product_label">
                <t t-set="label" t-value="product.dr_label_id"/>
                <t t-set="style" t-value="'1'"/>
                <t t-set="_classes" t-value="'mb-3 flat'"/>
            </t>
        </xpath>

        <xpath expr="//h1[@t-field='product.name']" position="attributes">
            <attribute name="class">h3</attribute>
        </xpath>

        <xpath expr="//t[@t-placeholder='select']" position="before">
            <t t-set="product_pricelist_offer" t-value="product._get_product_pricelist_offer()"/>
            <div t-if="product_pricelist_offer" class="row pt-2 no-gutters">
                <div class="col-12">
                    <h6 t-field="product_pricelist_offer['rule'].dr_offer_msg"/>
                </div>
            </div>
            <div t-if="product_pricelist_offer" class="row style-4 tp-countdown pt-2 no-gutters"
                 data-countdown-style="s_countdown_4" t-att-data-due-date="product_pricelist_offer['date_end']">
                <div class="col-12 mt-3 tp-end-msg-container css_non_editable_mode_hidden">
                    <h6 class="mb-0" t-field="product_pricelist_offer['rule'].dr_offer_finish_msg"/>
                </div>
            </div>
        </xpath>

        <xpath expr="//div[@id='add_to_cart_wrap']" position="replace">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-4 col-lg-3">

                        <t t-call="website_sale.product_price"/>
                        <small class="ml-1 text-muted o_base_unit_price_wrapper d-none"
                               groups="website_sale.group_show_uom_price">
                            <t t-call="website_sale.base_unit_price"/>
                        </small>

                    </div>
                    <div class="col-5 col-lg-5 text-center">
                        <div class="css_quantity input-group d-inline-flex mr-2 my-1 align-middle"
                             contenteditable="false" t-if="(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &gt;0">
                            <div class="input-group-prepend">
                                <a t-attf-href="#" t-attf-class="btn btn-primary js_add_cart_json #{(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &lt;1 and 'disabled' or ''}" aria-label="Remove one"
                                   title="Remove one"   >
                                    <i class="fa fa-minus"/>
                                </a>
                            </div>
                            <input type="text" class="form-control quantity" data-min="1" name="add_qty" t-att-readonly="None if (product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &gt;=1 else '1'"
                                   t-att-value="add_qty or 1"/>
                            <div class="input-group-append">
                                <a t-attf-href="#" t-attf-class="btn btn-primary float_left js_add_cart_json #{(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &lt;1 and 'disabled' or ''}"
                                   aria-label="Add one"
                                   title="Add one"  >
                                    <i class="fa fa-plus"/>
                                </a>
                            </div>
                        </div>
                         <div class="mt-2 float-right" t-if="(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &lt; 1">
                                <h5 class="oe_price" t-if="product.detailed_type=='product'">En rupture de stock </h5>
                            </div>
                    </div>

                    <div class="col-3 col-lg-4 text-center pr-sm-4">
                        <div id="add_to_cart_wrap">
                            <a role="button" id="add_to_cart"  t-if="(product.product_variant_id.free_qty - product.product_variant_id.cart_qty) &gt;= 1"
                               class="btn btn-primary  js_check_product a-submit d-block d-sm-inline-block flex-grow-1 rounded-pill m-auto"
                               href="#">
                                <i class="dri dri-cart mt-2"/>
                            </a>
                            <div id="product_option_block" class="d-inline-block align-middle"/>
                        </div>
                    </div>
                </div>

            </div>

        </xpath>


        <xpath expr="//div[@id='o_product_terms_and_share']" position="before">
            <!-- Brand -->
            <t t-if="product.dr_brand_value_id">
                <hr class="mt-2"/>
                <div class="row align-items-center">
                    <div class="col-6 col-md-3" t-if="product.dr_brand_value_id.dr_image"
                         t-field="product.dr_brand_value_id.dr_image" t-options="{'widget': 'image'}"/>
                    <div class="col-12 col-md-9 mt-2 mt-md-0">
                        <h6>
                            <a class="tp-link-dark"
                               t-attf-href="/shop?attrib=#{product.dr_brand_value_id.attribute_id.id}-#{product.dr_brand_value_id.id}">
                                <span t-field="product.dr_brand_value_id.name"/>
                            </a>
                        </h6>
                        <p class="mb-0" t-field="product.dr_brand_value_id.dr_brand_description"/>
                    </div>
                </div>
                <hr/>
            </t>
            <!-- Offers -->
            <t t-if="website._get_dr_theme_config('bool_product_offers') and product.dr_product_offer_ids">
                <div class="row">
                    <t t-foreach="product.dr_product_offer_ids" t-as="offer">
                        <div class="col-12 o_not_editable">
                            <i t-attf-class="fa fa-#{offer.icon} text-primary"/>
                            <h6 class="d-inline-block mx-1" t-field="offer.name"/>
                            <span class="d-inline-block" t-field="offer.description"/>
                            <a href="#" class="d-inline-block mx-1 tp-lazy-dialog" data-res-model="dr.website.content"
                               t-att-data-res-id="offer.id" data-field="content">
                                <h6 class="text-primary">
                                    Details
                                    <i class="fa fa-angle-right"/>
                                </h6>
                            </a>
                        </div>
                    </t>
                </div>
                <hr class="mt-2"/>
            </t>
        </xpath>

        <xpath expr="//div[@id='product_full_description']" position="replace"/>

        <xpath expr="//section[@id='product_detail']" position="after">
            <div class="container px-0 my-4" t-if="product.website_description">
                <div class="row no-gutters">
                    <div class="col-12">
                        <div class="my-1 tp-tab-title text-center">
                            <h2 class="text-primary">Description</h2>
                        </div>

                        <div groups="base.group_public,base.group_portal" t-if="product.website_description"
                             class="tab-pane fade show active" id="tp-product-description-tab" role="tabpanel">
                            <div class="container-fluid">
                                <div class="row m-0 py-2">
                                    <div class="col-12">
                                        <div itemprop="description" t-field="product.website_description"
                                             class="oe_structure"
                                             id="product_full_description"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div groups="base.group_user" class="tab-pane fade show active" id="tp-product-description-tab"
                             role="tabpanel">
                            <div class="container-fluid">
                                <div class="row m-0 py-2">
                                    <div class="col-12">
                                        <div itemprop="description" t-field="product.website_description"
                                             class="oe_structure"
                                             id="product_full_description"/>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="container tp-hook-accessory-products">
                <div class="row">
                    <t t-set="has_alternative_products"
                       t-value="is_view_active('website_sale.recommended_products') and product._get_website_alternative_product()"/>
                    <t t-set="has_accessory_products" t-value="product.accessory_product_ids"/>
                    <t t-set="has_two_blocks" t-value="has_alternative_products and has_accessory_products"/>
                    <div t-if="has_alternative_products"
                         t-attf-class="#{'col-md-6' if has_accessory_products else 'col-md-12'} my-3">
                        <div class="tp-suggested-product-slider tp-snippet-shiftless-enable"
                             t-attf-data-selection-info='{"selectionType":"manual", "recordsIDs":#{product._get_website_alternative_product().ids}}'
                             t-att-data-two-block="has_two_blocks">
                            <div class="position-relative">
                                <h5 class="tp-underline-title">Similar Products</h5>
                                <div class="tp-slider-controls">
                                    <button class="btn btn-link text-primary tp-prev" role="button" aria-label="Prev">
                                        <i class="fa fa-chevron-left"/>
                                    </button>
                                    <button class="btn btn-link text-primary tp-next" role="button" aria-label="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </button>
                                </div>
                            </div>
                            <div class="tp-suggested-products-cards owl-carousel owl-theme owl-loaded d-none"/>
                        </div>
                    </div>
                    <div t-if="has_accessory_products"
                         t-attf-class="#{'col-md-6' if has_alternative_products else 'col-md-12'} my-3">
                        <div class="tp-suggested-product-slider tp-snippet-shiftless-enable"
                             t-attf-data-selection-info='{"selectionType":"manual", "recordsIDs":#{product.accessory_product_ids.mapped("product_tmpl_id").ids}}'
                             t-att-data-two-block="has_two_blocks">
                            <div class="position-relative">
                                <h5 class="tp-underline-title">Accessory Products</h5>
                                <div class="tp-slider-controls">
                                    <button class="btn btn-link text-primary tp-prev" role="button" aria-label="Prev">
                                        <i class="fa fa-chevron-left"/>
                                    </button>
                                    <button class="btn btn-link text-primary tp-next" role="button" aria-label="Next">
                                        <i class="fa fa-chevron-right"/>
                                    </button>
                                </div>
                            </div>
                            <div class="tp-suggested-products-cards owl-carousel owl-theme owl-loaded d-none"/>
                        </div>
                    </div>
                </div>
            </div>
            <div t-if="website._get_dr_theme_config('bool_sticky_add_to_cart')"
                 class="tp-sticky-add-to-cart position-fixed shadow-lg border rounded-pill p-2 css_editable_mode_hidden"
                 style="display: none">
                <div class="d-flex align-items-center">
                    <a class="mr-2" href="#">
                        <img t-attf-src="/web/image/product.template/#{product.id}/image_128"
                             class="rounded-circle border product-img" t-att-alt="product.name"/>
                    </a>
                    <div class="mr-2">
                        <h6 class="text-truncate product-name" t-out="product.name"/>
                        <h6 class="mb-0 text-primary">
                            <span class="product-price" t-out="combination_info['price']"
                                  t-options="{'widget': 'monetary', 'display_currency': website.currency_id}"/>
                        </h6>
                    </div>
                    <a href="#" class="btn btn-primary-soft rounded-pill product-add-to-cart">
                        <i class="dri dri-cart"/>
                    </a>
                </div>
            </div>
        </xpath>
    </template>
</odoo>